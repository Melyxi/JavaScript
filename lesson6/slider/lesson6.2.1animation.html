<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css"> </head>
<link rel="stylesheet" href="magic-master/dist/magic.css">
<link rel="stylesheet" href="magic-master/dist/magic.min.css">

<body>
   <div class="container-slaider">
    <div class="load">
        <h1>Загрузка!!</h1></div>
    <div class="slider">
        <div class="slider-item slider-hidden"> <img src="https://placeimg.com/1920/1080/animals" alt=""> </div>
        <div class="slider-item slider-hidden"> <img src="https://placeimg.com/1920/1080/tech" alt=""> </div>
        <div class="slider-item slider-hidden"> <img src="https://placeimg.com/1920/1080/nature" alt=""> </div>
        <div class="arrow-6">
            <svg class="left slider-hidden" width="18px" height="17px" viewBox="0 0 18 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g transform="translate(8.500000, 8.500000) scale(-1, 1) translate(-8.500000, -8.500000)">
                    <polygon class="arrow-6-pl" points="16.3746667 8.33860465 7.76133333 15.3067621 6.904 14.3175671 14.2906667 8.34246869 6.908 2.42790698 7.76 1.43613596"></polygon>
                    <polygon class="arrow-6-pl-fixed" points="16.3746667 8.33860465 7.76133333 15.3067621 6.904 14.3175671 14.2906667 8.34246869 6.908 2.42790698 7.76 1.43613596"></polygon>
                    <path d="M-1.48029737e-15,0.56157424 L-1.48029737e-15,16.1929159 L9.708,8.33860465 L-2.66453526e-15,0.56157424 L-1.48029737e-15,0.56157424 Z M1.33333333,3.30246869 L7.62533333,8.34246869 L1.33333333,13.4327013 L1.33333333,3.30246869 L1.33333333,3.30246869 Z"></path>
                </g>
            </svg>
            <svg class="right slider-hidden" width="18px" height="17px" viewBox="-1 0 18 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g>
                    <polygon class="arrow-6-pl" points="16.3746667 8.33860465 7.76133333 15.3067621 6.904 14.3175671 14.2906667 8.34246869 6.908 2.42790698 7.76 1.43613596"></polygon>
                    <polygon class="arrow-6-pl-fixed" points="16.3746667 8.33860465 7.76133333 15.3067621 6.904 14.3175671 14.2906667 8.34246869 6.908 2.42790698 7.76 1.43613596"></polygon>
                    <path d="M-4.58892184e-16,0.56157424 L-4.58892184e-16,16.1929159 L9.708,8.33860465 L-1.64313008e-15,0.56157424 L-4.58892184e-16,0.56157424 Z M1.33333333,3.30246869 L7.62533333,8.34246869 L1.33333333,13.4327013 L1.33333333,3.30246869 L1.33333333,3.30246869 Z"></path>
                </g>
            </svg>
        </div>
    </div>
    </div>
    <script>
        'use strict';
        let sliderEL = document.querySelectorAll('.slider-item');
        console.log(sliderEL.length);
        let rightEL = document.querySelector(".right");
        let leftEL = document.querySelector(".left");
        let lengthSlider = sliderEL.length;
        let i = 0;
        window.addEventListener('load', function () {
            document.querySelector('.right').classList.remove('slider-hidden');
            document.querySelector('.left').classList.remove('slider-hidden');
            document.querySelector('.load').classList.add('slider-hidden');
            let i = 0;
            sliderEL[i].classList.remove('slider-hidden');
            rightEL.addEventListener('click', function () {
                slider.rightFunc();
            });
            leftEL.addEventListener('click', function () {
                slider.leftFunc();
            });
        });
        let slider = {
            indx: 0,
            nextindx: sliderEL.length - 1
            , rightFunc() {
                this.hideSlider();
                if (this.indx == sliderEL.length - 1) {
                    this.indx = 0;
                    this.nextindx++;
                }
                else if (this.nextindx == sliderEL.length - 1){
                    this.nextindx = 0;
                    this.indx++;
                }
                else if (this.indx<this.nextindx){
                    [this.indx, this.nextindx]  = [this.nextindx, this.indx];
                }
                
                else {
                    this.indx++;
                    this.nextindx++;
                }
                sliderEL[this.nextindx].classList.add('magictime', 'bombRightOut');
                sliderEL[this.nextindx].classList.remove('slider-hidden');
//                sliderEL[this.indx].classList.remove('slider-hidden');
                setTimeout(() => {
                    sliderEL[this.nextindx].classList.remove('magictime', 'bombRightOut');
                    sliderEL[this.nextindx].classList.add('slider-hidden');
                }, 500);
                sliderEL[this.indx].classList.remove('slider-hidden');
            }
            , leftFunc() {
                this.hideSlider();
                if (this.indx == 0) {
                    this.indx = sliderEL.length - 1;
                    this.nextindx = 0;
                }
                else if(this.nextindx == 0){
                    this.nextindx = sliderEL.length - 1;
                    this.indx--;
                }
                else if (this.nextindx<this.indx){
                    [this.indx, this.nextindx]  = [this.nextindx, this.indx];
                    
                }
                
                
                else {
                    this.indx--;
                    this.nextindx--;
                }
                
                
                
                
                
                sliderEL[this.nextindx].classList.add('magictime', 'bombLeftOut');
                sliderEL[this.nextindx].classList.remove('slider-hidden');
//                sliderEL[this.indx].classList.remove('slider-hidden');
                setTimeout(() => {
                    sliderEL[this.nextindx].classList.remove('magictime', 'bombLeftOut');
                    sliderEL[this.nextindx].classList.add('slider-hidden');
                }, 500);
                sliderEL[this.indx].classList.remove('slider-hidden');
            }
            , hideSlider() {
                sliderEL.forEach(function (slide) {
                    slide.classList.add('slider-hidden');
                });
            }
        }
    </script>
</body>

</html>